2002-02-17  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (need_root_pixmap_p): We don't need a root pixmap if
	neither a wallpaper nor a gradient is enabled
	(render_to_screen): Use set_back_pixmap/set_background when just
	setting a color with a root applier
	(need_root_pixmap_p): If the last preferences structure had
	neither gradient nor wallpaper enabled, we need a new root pixmap

2002-02-12  Lauris Kaplinski  <lauris@ximian.com>

	* applier.c (draw_disabled_message): Use g_object_unref for GdkGC
	(render_wallpaper): Use gdk_drawable_get_size
	(render_to_screen): Use gdk_get_default_root_window
	(wallpaper_full_cover_p): Ditto

	* preferences.c (read_color_from_string): Use gdk_rgb_find_color

	* applier.c (bg_applier_get_preview_widget): Use gnome_program_locate_file,
	replace GDK_ROOT_PARENT with gdk_get_default_root_window, deprecated
	gdk_window_* methods with gdk_drawable_* ones
	(bg_applier_get_preview_widget): Removed gtk_widget_push_visual,
	gtk_widget_pop_visual, use gtk_image instead of gtk_pixmap

2002-02-07  Richard Hestilow  <hestilow@ximian.com>

	* applier.c (BGApplierPrivate): Add "timeout" field.
	(bg_apply_cleanup_cb): Added.
	(bg_applier_apply_prefs): Add/reset timeout for cleanup function
	if we load a pixbuf.

2002-02-04  Lauris Kaplinski  <lauris@ximian.com>

	* preferences.c (read_wptype_from_string): Do not crash on NULL
	(read_orientation_from_string): Ditto

	* applier.c (bg_applier_dispose): Replace deprecated methods
	(draw_disabled_message): Use gtk_image instead of gtk_pixmap,
	replace deprecated methods
	(render_wallpaper): Replace deprecated methods

2002-01-13  Seth Nickell  <snickell@stanford.edu>

	reviewed by: <delete if not using a buddy>

	* Makefile.am:
	* applier.c: (bg_applier_apply_prefs),
	(bg_applier_get_preview_widget), (draw_disabled_message),
	(create_pixmap), (get_geometry):
	* preferences.c: (bg_preferences_load),
	(bg_preferences_merge_entry), (read_wptype_from_string),
	(read_orientation_from_string):
	* preferences.h:

2002-01-28  Richard Hestilow  <hestilow@ximian.com>

	* Makefile.am: Use libtool to create the static library, thus
	allowing shlibs to link to libbackground (needed for metatheme).

2002-01-10  Bradford Hovinen  <hovinen@ximian.com>

	Courtesy of Jean Schurger <jschurger@schurger.org>:
	* preferences.c (bg_preferences_merge_entry): Make sure the
	wallpaper filename is non-NULL before doing anything with it

2001-12-20  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (bg_applier_apply_prefs): Disable the wallpaper if we
	couldn't load it
	(bg_applier_apply_prefs): Create a clone of the preferences
	structure first and work off of that
	(wallpaper_full_cover_p): Return FALSE if the wallpaper pixbuf is NULL

	* preferences.c (bg_preferences_merge_entry): Don't actually set
	the wallpaper to "enabled" unless we can load the thing

	* applier.c: Eliminate compiler warnings

	* applier.[ch]: Rename applier to bg_applier to avoid possible
	namespace collision

	* preferences.[ch]: Rename preferences to bg_preferences to avoid
	possible namespace collision

2001-12-18  Bradford Hovinen  <hovinen@ximian.com>

	* preferences.c: Update GConf keys to use /desktop/gnome/background
	(preferences_load): Use gconf_client rather than gconf_engine

2001-12-17  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (set_root_pixmap): Set the pixmap_id correctly if
	pixmap is NULL or -1.

	* preferences.c (preferences_merge_entry): Eliminate name; use
	entry->key on the warning
	(preferences_merge_entry): Use correct keys

	* applier.c (applier_get_preview_widget): Make sure the pixmap is
	masked correctly
	(applier_apply_prefs): s/gtk_object_destroy/g_object_unref/

2001-12-07  Bradford Hovinen  <hovinen@ximian.com>

	* preferences.c (read_color_from_string): Check if string is
	non-NULL
	(preferences_load): Initialize the error structure

	* applier.c (applier_class_init): Initialize object_class properly
	before using it; install property after {get|set}_property are set
	(applier_get_preview_widget): Construct the GC before using it

