2007-06-17  Denis Washington  <denisw@svn.gnome.org>

	* appearance-desktop.c: (desktop_init): (wp_view_tooltip_cb):
	* gnome-wp-item.c: (gnome_wp_item_update_description):
	Added metadata tooltips to the thumbnails in the Background tab.
	Needs GTK+ 2.11 to compile (but is surrounded with GTK_CHECK_VERSION()
	for compilation with older gtk+ versions).

2007-06-17  Denis Washington  <denisw@svn.gnome.org>

	* appearance-style.c: (prepare_list):
	Change the weight of the theme titles from bold to normal in the Theme
	Details window's lists.

2007-06-16  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* appearance-main.c: (init_appearance_data), (main):
	* gnome-theme-installer.desktop.in.in: make gnome-theme-installer
	work

2007-06-16  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* appearance-style.c: (prepare_list):
	* appearance-themes.c: (theme_install_cb), (theme_delete_cb),
	(theme_details_changed_cb):
	* theme-installer.c: (cleanup_tmp_dir), (file_theme_type),
	(missing_utility_message_dialog), (transfer_done_tgz_tbz),
	(transfer_done_archive), (gnome_theme_install_real),
	(transfer_done_cb), (gnome_theme_install_from_uri),
	(gnome_theme_installer_run):
	* theme-installer.h: add initial support for installing themes,
	includes support for packages containing more than one theme
	(bug #409624)

2007-06-15  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (wp_props_load_wallpaper),
	(wp_scale_type_changed), (wp_shade_type_changed):
	* gnome-wp-utils.c: (gnome_wp_pixbuf_tile): be extra careful when
	generating pixbufs (should mean we just get no thumbs instead of
	assertion failures, bug #403160)

2007-06-14  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* theme-util.c: (theme_delete), (theme_model_iter_last):
	* theme-util.h: new files

	* appearance.glade: default delete buttons to insensitive,
	change label for "Custom" key, adjust column ids for icon view

	* appearance-style.c: (style_init), (prepare_list),
	(update_color_buttons_from_settings), (theme_name_changed),
	(color_button_clicked_cb),
	(color_scheme_defaults_button_clicked_cb):
	* appearance-themes.c: (theme_get_selected_name),
	(theme_get_selected), (theme_select_iter), (theme_select_name),
	(theme_is_equal), (theme_set_custom_from_theme),
	(theme_changed_on_disk_cb), (theme_custom_cb), (theme_delete_cb),
	(theme_details_changed_cb), (theme_color_scheme_changed_cb),
	(theme_gconf_changed), (theme_postinit), (themes_init),
	(themes_shutdown):
	* appearance.h: improvements all around the block (metatheme
	deletion now working, and custom theme working much better)

2007-06-09  Denis Washington  <denisw@svn.gnome.org>

	* appearance-style.c: (theme_name_changed):
	Manually deal with gtk+ theme changes now that the theme thumbnailing
	code uses the default GtkSettings again.

2007-06-10  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (style_init), (check_color_schemes_enabled):
	fix "reset to defaults" sensitivity for real
	* appearance-themes.c: (theme_color_scheme_changed_cb),
	(themes_init): listen to colour scheme changes as well

2007-06-10  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (check_color_schemes_enabled): disable the "reset
	to defaults" button if the theme doesn't support custom colours

2007-06-10  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (check_color_schemes_enabled): we don't need the
	engine stuff, so don't retrieve it in the first place

2007-06-10  Jens Granseuer  <jensgr@gmx.net>

	* appearance-main.c: (init_appearance_data), (main):
	* appearance.h: fix passing and parsing of command line args

	* appearance-style.c: (update_color_buttons_from_settings),
	(check_color_schemes_enabled): fix leaks

	* appearance.glade: revert response_id sillyness from last commit

2007-06-09  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade:
	* appearance-style.c:
	Add all missing color schemes options from gnome-theme-manager, including
	a Reset To Defaults button.

2007-06-07  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (is_locked_down),
	(theme_changed_on_disk_cb), (theme_selection_changed_cb),
	(themes_init): add initial lockdown bits from theme-manager,
	delete button sensitivity updates, and preliminary support
	for reacting to metatheme changes

2007-06-06  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (theme_thumbnail_generate),
	(theme_queue_for_thumbnail), (theme_thumbnail_done_cb): update
	for changes in thumbnailer API

2007-06-06  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (style_response_cb), (style_init): don't
	destroy the window on "delete-event"

	* appearance-themes.c: (theme_load_from_gconf),
	(theme_thumbnail_generate), (theme_queue_for_thumbnail),
	(theme_get_selected), (theme_set_custom_from_selected),
	(theme_remove_custom), (theme_thumbnail_done_cb),
	(theme_selection_changed_cb), (theme_custom_cb),
	(theme_details_changed_cb), (themes_init): hook up more of the
	customization functionality; don't unref generated thumbnails
	because they are still held in a cache by the thumbnailer

2007-06-05  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* gnome-theme-package.xml.in: move theme package mime type over
	from the theme-manager (closes bug #444336)

2007-06-04  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (desktop_init), (desktop_shutdown):
	* appearance-desktop.h:
	* appearance-font.c: (font_init), (font_shutdown):
	* appearance-font.h:
	* appearance-main.c: (main_window_response), (main):
	* appearance-style.c: (style_init), (conv_to_widget_cb),
	(conv_from_widget_cb):
	* appearance-style.h:
	* appearance-themes.c:
	* appearance-themes.h:
	* appearance.h: major resource handling fixup and initial bits
	for handling custom metathemes

2007-05-30  Jens Granseuer  <jensgr@gmx.net>

	* appearance.glade: fix duplicate mnemonic

2007-05-28  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (style_init), (find_string_in_model),
	(conv_to_widget_cb), (update_color_buttons_from_string): minor
	code simplification/cleanup

2007-05-25  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (prepare_list): don't leak thumbnails

2007-05-25  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (prepare_list), (conv_to_widget_cb),
	(conv_from_widget_cb): properly distinguish between theme name and
	theme label (currently only relevant for icon themes)

2007-05-25  Denis Washington  <denisw@svn.gnome.org>

	* theme-thumbnailing.png:
	Add theme-thumbnailing.png to Makefile.am.

2007-05-25  Denis Washington  <denisw@svn.gnome.org>

	* theme-thumbnailing.png:
	Added as it is used by appearance-themes.c

2007-05-25  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade: Fix button order in theme details dialog again.

2007-05-25  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade:
	* appearance-style.c:
	Revert the organization of the theme details dialog to the old (2.18)
	style again, but now with thumbnails for gtk+, metacity and icon themes.

2007-05-16  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: (prepare_combo), (find_string_in_model),
	(conv_to_widget_cb), (conv_from_widget_cb),
	(update_color_buttons_from_string), (color_button_clicked_cb):
	minor cleanup and getting rid of unnecessary casts

2007-05-16  Denis Washington  <denisw@svn.nome.org>

	* appearance-desktop.c: (desktop_init): Minor code cleanup.

2007-05-16  Denis Washington  <denisw@svn.nome.org>

	* appearance-desktop.c: (desktop_init): re-enable drag-and-drop for the
	wallpaper list.

2007-05-14  Jens Granseuer  <jensgr@gmx.net>

	* appearance.glade: fix button order, remove redundant receives_default,
	don't mark stock labels translatable, and other minor cleanups

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: (prepare_combo): Connect up colour scheme monitor. Hide
	window on delete, rather than destroy. Add an item to the theme lists if the
	current theme is not present already.
	* appearance-themes.c: (theme_custom_cb): Add missing #include. Moved some
	code to appearance-style.c

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: (prepare_combo): Sort the items in the theme lists

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (theme_thumbnail_func): unref the thumbnail when
	we're done with it

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-themes.c: (theme_thumbnail_func): Don't free data we don't own.
	Prevents crash when changing themes.

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (themes_init), (theme_thumbnail_generate),
	(theme_thumbnail_func): fix asynchronous thumbnail generation

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: Add colour scheme functions

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance.glade: fix duplicate mnemonic

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (themes_init): refix button name, too

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (themes_init): fix gcc 2 build again (bad thos)

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (appearance_window_response):
	* appearance.glade: use predefined GTK constants for reponse ids

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-themes.c: (themes_init), (theme_changed_func): Use asynchronous
	methods to generate thumbnails.

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-font.c: (cb_details_response), (cb_show_details):
	now we parse the entire glade file at startup, there's no need to
	reparse it for the font details dialog

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (themes_init): update button name, declare
	variables at beginning of block
	* appearance.glade: fix button group assignment (again)

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* gnome-wp-item.c: (gnome_wp_item_free): don't leak the WPItems

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-themes.c: (themes_init), (theme_changed_func),
	(theme_selection_changed_cb), (theme_custom_cb):
	- Sort metathemes icon view
	- Apply theme on selection change
	- Use theme name rather than display name to apply theme

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance-main.c: (init_appearance_data):
	* appearance-themes.c: (themes_init), (theme_activated_cb):
	* appearance.glade:

	Move style tab into new window

2007-05-13  Denis Washington  <denisw@svn.nome.org>

	* appearance.glade: fixed a small mistake in Jens' last commit.

2007-05-13  Jens Granseuer  <jensgr@gmx.net>

	* appearance.glade: fix font rendering button group assignment,
	rename Preferences tab to Interface

2007-05-13  Denis Washington  <denisw@svn.nome.org>

	* gnome-wp-item.c: Made thumbnails in Desktop tab a bit smaller.

2007-05-13  Thomas Wood  <thos@gnome.org>

	* appearance.glade: Change "Desktop" tab label to "Background"

2007-05-12  Denis Washington  <denisw@svn.nome.org>

	* appearance-desktop.c: Changed the icon view's selection mode to
	GTK_SELECTION_BROWSE, fixed scrolling to the currently active
	background after the icon view is realized, and two other minor
	fixes.

2007-05-12  Denis Washington  <denisw@svn.nome.org>

	* appearance-desktop.c: (wp_remove_wallpaper):
	gtk_icon_view_set_cursor() => gtk_icon_view_select_path()

2007-05-12  Denis Washington  <denisw@svn.nome.org>

	* appearance.glade:
	* appearance-desktop.c: (wp_tree_delete_event):
	Fix for my last commit so there is no double free when the Help button has
	been clicked.

2007-05-12  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (wp_scale_type_changed),
	(wp_color_changed), (wp_props_wp_set), (wp_props_wp_selected),
	(wp_load_stuffs): fix secondary color picker being ignored and initial
	dialog state when no wallpaper is selected

2007-05-12  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (get_selected_item),
	(wp_tree_delete_event), (wp_update_preview), (desktop_init):
	* appearance.glade: move some strings to glade file, don't leak the
	file selector, plus a few minor beautifications

2007-05-11  Denis Washington  <denisw@svn.nome.org>

	* appearance-desktop.c: (desktop_init):
	Fix the background list not being saved when closing the capplet window.

2007-05-10  Denis Washington  <denisw@svn.nome.org>

	* appearance.h:
	* appearance-desktop.c:
	* appearance.glade:
	* gnome-wp-item.c:
	* Makefile.am:
	* wp-cellrenderer.[ch]:
	Replace the background treeview with an icon view that only shows the
	thumbnails. Tooltips are to be done.

2007-05-09  Jens Granseuer  <jensgr@gmx.net>

	* appearance-themes.c: (themes_init):
	* appearance.glade: change Open button label to Install...

2007-05-09  Jens Granseuer  <jensgr@gmx.net>

	* appearance-style.c: make sure that appearance.h (and thereby config.h)
	is included first; constify strings

	* gnome-wp-xml.c: (gnome_wp_xml_load_xml): fix leak

2007-05-08  Denis Washington  <denisw@svn.nome.org>

	* appearance.glade:
	Set mnemonic widgets for the labels in the Desktop tab.

2007-05-07  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: (conv_to_widget_cb), (prepare_combo): Remove some
	unnecessary code.

2007-05-07  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: (prepare_combo): Fix icon theme combo box

2007-05-07  Thomas Wood  <thos@gnome.org>

	* appearance-style.c: (prepare_combo): Use GConfPropertyEditor for theme
	combo boxes

2007-05-07  Thomas Wood  <thos@gnome.org>

	* Makefile.am:
	* appearance-main.c: (main):
	* appearance-style.c:
	* appearance-style.h:
	- Add files for Style tab
	- Implement changing gtk and metacity themes

	* appearance.glade: Change "Themes" to "Theme" and name some widgets

2007-05-07  Denis Washington  <denisw@svn.nome.org>

	* appearance.glade:
	* appearance-desktop.c: (desktop_init):
	Changed "Add" button in Desktop tab to "Add...".

2007-05-07  Thomas Wood  <thos@gnome.org>

	* appearance-main.c: (main):
	* appearance.glade:

	- Change GtkWindow to GtkDialog
	- Add Help and Close buttons
	- Set theme list scrolling policy to automatic

2007-05-07  Thomas Wood  <thos@gnome.org>

	* appearance.glade: Add a "Style" tab for the theme detail options

2007-05-07  Thomas Wood  <thos@gnome.org>

	* Makefile.am: Add FONT_CAPPLET_CFLAGS to INCLUDES

2007-05-06  Jens Granseuer  <jensgr@gmx.net>

	* appearance-main.c: (main): set application icon

2007-05-06  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* gnome-appearance-properties.desktop.in.in: add a desktop file

2007-05-06  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade: make the Add Wallpaper and Remove buttons in the
	Desktop tab stock buttons.

2007-05-04  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (desktop_init):
	* appearance.glade: more HIG and consistency fixing

2007-05-04  Jens Granseuer  <jensgr@gmx.net>

	* appearance-desktop.c: (desktop_init):
	* appearance.glade: fix string capitalization according to HIG

2007-05-04  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade: Change tab order; Desktop now comes before Fonts.

2007-05-04  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am:
	* appearance-font.c:
	* appearance-font.h:
	* appearance-main.c: (init_appearance_data), (main):
	* appearance.glade:
	* appearance.h:
	* subpixel-bgr.png:
	* subpixel-rgb.png:
	* subpixel-vbgr.png:
	* subpixel-vrgb.png:

	add implementation for fonts tab

2007-05-04  Thomas Wood  <thos@gnome.org>

	* appearance-desktop.c: (wp_add_images), (wp_dragged_image),
	(desktop_init):
	* appearance-main.c: (main):
	* appearance-themes.c: (themes_init):
	* appearance-ui.c: (set_toolbar_style), (set_have_icons),
	(ui_init):
	* appearance.h:
	Remove WID() macro, which has an incompatible definition in capplet-utils.h

2007-05-04  Thomas Wood  <thos@gnome.org>

	* appearance-themes.c: (themes_init): Use readable name rather than file name
	in themes list

2007-05-03  Denis Washington  <denisw@svn.gnome.org>

	* appearance-desktop.c: (wp_tree_delete_event): Fixed a leak.

2007-05-03  Denis Washington  <denisw@svn.gnome.org>

	* appearance.h:
	* appearance-desktop.c:
	Ported Jens Granseuer's patch for bug #332810 to the appearance capplet
	and applied it.


2007-05-02  Jens Granseuer  <jensgr@gmx.net>

	* appearance-ui.c: (toolbar_detachable_cb), (ui_init): use proper
	GConf notification instead of hand-picking the correct signal for
	detachable toolbar

2007-05-02  Denis Washington  <denisw@svn.gnome.org>

	* Makefile.am: fizz says: don't indent with spaces in Makefile.am.
	* ChangeLog: I say: don't do so in ChangeLog either.

2007-05-02  Denis Washington  <denisw@svn.gnome.org>

	* appearance-desktop.c: Added drag and drop, re-enabled the watch cursor
	when adding images, and removed some commented out code.

2007-05-02  Denis Washington  <denisw@svn.gnome.org>

	* appearance-desktop.[ch]: Corrected copyright notice authors.

2007-05-01  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade:
	* appearance-desktop.c:
	* appearance-desktop.h:
	* appearance-main.h:
	* Makefile.am:
	* gnome-wp-*.[ch]:

	Implement the the Desktop tab. Drag and drop still has to be done.

2007-05-01  Thomas Wood  <thos@gnome.org>

	* appearance.glade: Combine Themes and Appearance tabs

2007-05-01  Jens Granseuer  <jensgr@gmx.net>

	* appearance-ui.c: (ui_init):
	* appearance.glade: convert all instances of GtkOptionMenu to
	GtkComboBox

2007-05-01  Jens Granseuer  <jensgr@gmx.net>

	* appearance-main.c: (main):
	* appearance-ui.c: (ui_init):
	* appearance-ui.h:
	* appearance.h: we don't need to unref the GConfPropertyEditors

2007-05-01  Jens Granseuer  <jensgr@gmx.net>

	* appearance-main.c: (main):
	* appearance-ui.c:
	* appearance-ui.h:
	* appearance.h:
	* appearance.glade:

	fill the Preferences tab with life

2007-05-01  Jens Granseuer  <jensgr@gmx.net>

	* appearance-main.c: (init_appearance_data), (main):
	* appearance.h:

	include config.h before anything else and add a GConfClient
	reference to the AppearanceData struct

2007-04-30  Thomas Wood  <thos@gnome.org>

	* appearance-main.c: (main):
	* appearance.h:

	Include config.h and add some comments.

2007-04-30  Denis Washington  <denisw@svn.gnome.org>

	* appearance.glade: replace occurrences of "colour" with "color".

2007-04-30  Jens Granseuer  <jensgr@gmx.net>

	* Makefile.am: use GNOMECC_GLADE_DIR like the other capplets
	do
	* appearance-main.c: (init), (main): move initialization to
	a separate function, fix glade file location, leak less
	memory, and init g_threads

2007-04-30  Thomas Wood  <thos@gnome.org>

	* appearance-main.c:
	* appearance-themes.c:
	* appearance-themes.h:
	* appearance.h:

	Add license headers

