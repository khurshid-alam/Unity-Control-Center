2001-08-28  Bradford Hovinen  <hovinen@ximian.com>

	* preferences.c (preferences_load_from_bonobo_pbag): Don't adjust
	the opacity if the opacity setting is invalid
	(preferences_load_from_bonobo_db): Ditto

2001-08-27  Bradford Hovinen  <hovinen@ximian.com>

	* background-properties-capplet.c (setup_dialog): Initialize/free
	the CORBA environment structure
	(real_realize_cb): Put into an idle handler, called by
	realize_2_cb, the new timeout handler

	* preferences.c (preferences_load_from_bonobo_pbag): 
	(preferences_load_from_bonobo_db): Extract from preferences_new_*

	* background-properties-capplet.c (property_change_cb):
	(realize_cb): Accept prefs structure in lieu of
	Bonobo_PropertyBag; don't reload the preferences structure from
	the property bag
	(property_change_cb): Call preferences_apply_event to modify the
	preferences structure appropriately
	(property_change_cb):
	(realize_cb): If the preferences structure is marked destroyed,
	just return
	(setup_dialog): Create a preferences structure from the property
	bag given and use that as the extra data passed to callbacks
	(realize_cb): Put into an idle handler real_realize_cb

	* preferences.c (preferences_apply_event): Implement

	* applier.c (output_compat_prefs): Make prefs const

	* applier.[ch]: Have applier_apply_prefs take a const Preferences
	structure

	* preferences.[ch]: Make preferences_clone take a const
	Preferences structure

2001-08-26  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (renderer_render_background): Remove debugging message
	(renderer_render_wallpaper): Ditto

2001-08-17  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (renderer_render_wallpaper): Adjust opacity value to
	0...255 scale

	* preferences.c (preferences_new_from_bonobo_pbag):
	(preferences_new_from_bonobo_db): Use correct check to disable
	opacity

2001-08-13  Richard Hestilow  <hestilow@ximian.com>

	* background-properties-capplet.c (setup_dialog): Really
	override enabled this time. Really.

2001-08-13  Richard Hestilow  <hestilow@ximian.com>
 
 	* applier.c (applier_apply_prefs): Only draw disabled message
 	if do_preview. Actually, the user will never see this because
 	the correct behavior (which is done) is to assume if they're
 	running capplet, prefs->enable should be TRUE. This is because
 	we are only honoring enable as a hacker-only setting.
 	(output_compat_prefs): Output the correct "Enable" setting.
 
 	* background-properties-capplet.c (get_legacy_settings): Support
 	the "Enabled" flag. 
 
 	* preferences.c (preferences_new_from_bonobo_db): Import the
 	"enabled" flag. Note that this is not bothered with in the _pbag
 	function, because that's from the Proxy settings, which is only
 	used for the GUI capplet, which always sets enabled to True, because
 	this is a hacker-only option. Got it?

	* background-properties.xml: Add "enabled".

2001-07-31  Chema Celorio  <chema@celorio.com>

	* Makefile.am (cappletname): add DISTDIR to install-data-local

2001-07-27  Bradford Hovinen  <hovinen@ximian.com>

	* background-properties-capplet.c (get_legacy_settings): Fix
	val_ulong in the gradient case

	* RELEASE : 1.5.2

2001-07-26  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (applier_apply_prefs): Don't try to load the wallpaper
	if it's not enabled

	* preferences.c (preferences_new_from_bonobo_pbag): Use
	bonobo_property_editor_client_get_value_*
	(preferences_new_from_bonobo_pbag): Set gradient_enabled properly
	from property bag
	(preferences_new_from_bonobo_pbag): Check for wallpaper == "(none)"
	(preferences_new_from_bonobo_db): Ditto above

	* applier.c (renderer_render_wallpaper): Restore some lost tweaks
	from earlier.

	* preferences.c (preferences_init): strdup the home directory

	* applier.c: Store preview widget in the renderer, not the applier
	itself

	* background-properties-capplet.c (create_dialog): Add a "(none)"
	string to the history

2001-07-26  Richard Hestilow  <hestilow@ximian.com>

	* applier.c: Remove all bonobo-conf stuff.

	* preferences.[ch]: New functions preferences_new_from_bonobo_pbag
	and preferences_new_from_bonobo_db.

2001-07-26  Bradford Hovinen  <hovinen@ximian.com>

	* background-properties.glade: Tweak borders and padding

	* applier.c (get_geometry): Tweak geometry settings
	(renderer_render_wallpaper): Rendering geometry fixes
	(renderer_render_wallpaper): Remove debugging code

	* background-properties-capplet.c (property_change_cb): Accept
	applier as argument; retrieve property bag from applier
	(realize_cb): Retrieve applier from widget
	(setup_dialog): Store property bag in applier

	* applier.c (renderer_new): Store applier inside renderer; accept
	applier as function parameter

	* background-properties-capplet.c (create_dialog): Store the
	applier inside the widget

	* applier.c (struct _ApplierPrivate ): Define preview_widget here
	rather than globally
	(applier_get_preview_widget): Make this a method of the applier class

2001-07-25  Chema Celorio  <chema@celorio.com>

	* Makefile.am ($(oaffile)): remove the oaffile_IN_RULE macro and copy
	it here
	* Makefile.am: remove the DESKTOP_IN_RULE and copy the sed here

2001-07-24  Bradford Hovinen  <hovinen@ximian.com>

	* main.c (setup_dialog): Use bonobo_peditor_option_menu_construct

2001-07-25  Richard Hestilow  <hestilow@ximian.com>

	* main.c (setup_dialog): Hide opacity settings for now.
	
	* background-properties.glade: Rename opacity label. 

2001-07-24  Richard Hestilow  <hestilow@ximian.com>

	* applier.c (output_compat_prefs): Write to gnome-config to make
	nautilus happy. 
	(applier_apply_prefs): Change of is_nautilus_running handling
	logic to still output legacy settings. Also, call
	output_compat_prefs if is_root
.
2001-07-24  Richard Hestilow  <hestilow@ximian.com>
	
	* main.c (main): Pass in legacy files to capplet_init.

2001-07-23  Bradford Hovinen  <hovinen@ximian.com>

	* applier.c (renderer_render_wallpaper): Don't adjust pixmap width

2001-07-20  Chema Celorio  <chema@celorio.com>

	* RELEASE : 1.5.0

2001-07-19  Chema Celorio  <chema@celorio.com>

	* Makefile.am (cappletname): make distcheck love

2001-07-19  Richard Hestilow  <hestilow@ximian.com>

	* main.c: Add compatibility "-b" argument.

2001-07-19  Richard Hestilow  <hestilow@ximian.com>
	
	* applier.c: remove debugging spew

	* main.c (get_legacy_settings): Fix for FileName corba type.
	(apply_settings): Check to make sure applier exists.

2001-07-19  Bradford Hovinen  <hovinen@ximian.com>

	* Makefile.am: Rename binary to background-properties

2001-07-19  Richard Hestilow  <hestilow@ximian.com>
	
	* background-properties.desktop.in.in: Change exec string for
	bonobo-conf.
 
2001-07-19  Richard Hestilow  <hestilow@ximian.com>
	
	* bonobo-conf rewrite.
 
2001-07-19  Bradford Hovinen  <hovinen@ximian.com>

	* Makefile.am: Remove SUBDIRS
	(background_properties_SOURCES): Added missing applier.h

	* prefs-widget.c: Remove references to auto apply feature

	* applier.c (get_geometry): Use vwidth and vheight rather than
	dwidth and dheight when computing aspect ratio
	(get_geometry): Adjust rwidth and rheight according to above change

	* preferences.c (preferences_changed): Disable auto-apply

	* background-properties.glade: Remove apply automatically check
	button; change "More Solid" to "More Opaque"

2001-07-17  Chema Celorio  <chema@celorio.com>

	* start

